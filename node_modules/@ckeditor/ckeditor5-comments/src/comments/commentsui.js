/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x19a5=['add','listenTo','stop','focusTracker','model','focus','CommentThreadInputView','_viewToController','editor','push','CommentsUI','requires','tooltip','execute','isFocused','innerView','activeMarker','locale','addComment','length','hasMarkerForId','get','map','comment','getCommentThread','isEnabled','comment:','view','editing','addCommentThread','label','addSourceCollector','_createUIButton','icon','CommentsListView','pluginName','plugins','_threadToController','init','change:activeAnnotations'];(function(_0x26d1ac,_0x19a5b3){const _0xf3c42=function(_0x36f57a){while(--_0x36f57a){_0x26d1ac['push'](_0x26d1ac['shift']());}};_0xf3c42(++_0x19a5b3);}(_0x19a5,0x107));const _0xf3c4=function(_0x26d1ac,_0x19a5b3){_0x26d1ac=_0x26d1ac-0x0;let _0xf3c42=_0x19a5[_0x26d1ac];return _0xf3c42;};import{Plugin as _0x30c500}from'ckeditor5/src/core';import _0x40ecee from'./commentsrepository';import _0x2bb4e0 from'./commentsediting';import _0x46f7f4 from'../annotations/editorannotations';import{ButtonView as _0x2c58d5}from'ckeditor5/src/ui';import _0xb08292 from'../../theme/icons/add-comment.svg';import _0x11bc17 from'../annotations/annotations';import _0x2e60c6 from'./ui/view/commentslistview';import _0x206565 from'./ui/view/commentthreadinputview';import{getTranslation as _0x3cf90e}from'../utils/common-translations';export default class n extends _0x30c500{static get[_0xf3c4('0xc')](){return _0xf3c4('0x1b');}static get[_0xf3c4('0x1c')](){return[_0x40ecee,_0x2bb4e0,_0x46f7f4,_0x11bc17];}get[_0xf3c4('0xb')](){return _0x2e60c6;}get[_0xf3c4('0x17')](){return _0x206565;}[_0xf3c4('0xf')](){const _0x518641=this['editor'],_0x14d21a=_0x518641[_0xf3c4('0xd')]['get'](_0x40ecee),_0x24f154=_0x518641['plugins'][_0xf3c4('0x26')](_0x2bb4e0),_0xd60f1f=_0x518641[_0xf3c4('0xd')][_0xf3c4('0x26')](_0x11bc17),_0x2eb718=_0x518641[_0xf3c4('0xd')][_0xf3c4('0x26')](_0x46f7f4);_0x518641['ui']['componentFactory'][_0xf3c4('0x11')](_0xf3c4('0x0'),()=>this[_0xf3c4('0x9')]()),_0x2eb718[_0xf3c4('0x8')](()=>{const _0x3e7650=[];for(const [_0x37016a,_0x331ce3]of _0x14d21a[_0xf3c4('0xe')]){const _0x4ed5fd=_0x24f154['getAllMarkersForId'](_0x37016a['id']),_0x291747=_0x4ed5fd[_0xf3c4('0x27')](_0x37ab1e=>_0x37ab1e['getRange']());_0x4ed5fd[_0xf3c4('0x24')]>0x0&&_0x3e7650[_0xf3c4('0x1a')]([_0x331ce3[_0xf3c4('0x4')],_0x291747]);}return _0x3e7650;}),this[_0xf3c4('0x12')](_0xd60f1f,_0xf3c4('0x10'),(_0x239c64,_0x2a7868,_0x1541ec)=>{const _0x24e7b2=Array['from'](_0x1541ec)[_0xf3c4('0x27')](_0x3f5896=>_0x3f5896[_0xf3c4('0x20')])['find'](_0x40236a=>_0x14d21a[_0xf3c4('0x18')]['has'](_0x40236a));if(!_0x24e7b2)return void(_0x24f154[_0xf3c4('0x21')]=null);const _0x3aeb79=_0x14d21a[_0xf3c4('0x18')][_0xf3c4('0x26')](_0x24e7b2)[_0xf3c4('0x15')]['id'],_0x31927d=_0xf3c4('0x3')+_0x3aeb79;_0x24f154[_0xf3c4('0x25')](_0x3aeb79)?_0x24f154[_0xf3c4('0x21')]=_0x31927d:_0x24f154[_0xf3c4('0x21')]&&(_0x24f154[_0xf3c4('0x21')]=null);}),this['listenTo'](_0x14d21a,'removeCommentThread',(_0x65ab28,{threadId:_0x3b46ae,isFromAdapter:_0x4c4ed8})=>{!_0x4c4ed8&&_0x518641['ui'][_0xf3c4('0x14')][_0xf3c4('0x1f')]&&_0x24f154[_0xf3c4('0x25')](_0x3b46ae)&&_0x518641[_0xf3c4('0x5')][_0xf3c4('0x4')][_0xf3c4('0x16')]();},{'priority':'highest'}),this[_0xf3c4('0x12')](_0x14d21a,_0xf3c4('0x23'),(_0x288171,{threadId:_0x2343e5,isFromAdapter:_0x49d439})=>{if(_0x49d439||!_0x24f154[_0xf3c4('0x25')](_0x2343e5)||!_0x14d21a['hasCommentThread'](_0x2343e5))return;0x1===_0x14d21a[_0xf3c4('0x1')](_0x2343e5)[_0xf3c4('0x24')]&&(_0x518641['editing'][_0xf3c4('0x4')][_0xf3c4('0x16')](),_0x288171[_0xf3c4('0x13')]());},{'priority':'low'});}['_createUIButton'](){const _0x499b96=this[_0xf3c4('0x19')],_0x1331cc=new _0x2c58d5(_0x499b96[_0xf3c4('0x22')]),_0xfc24c5=_0x499b96['commands'][_0xf3c4('0x26')](_0xf3c4('0x6'));return _0x1331cc[_0xf3c4('0x7')]=_0x3cf90e(_0x499b96[_0xf3c4('0x22')],'Comment'),_0x1331cc[_0xf3c4('0x1d')]=_0x3cf90e(_0x499b96['locale'],'Comment'),_0x1331cc[_0xf3c4('0xa')]=_0xb08292,_0x1331cc['bind'](_0xf3c4('0x2'))['to'](_0xfc24c5),this['listenTo'](_0x1331cc,_0xf3c4('0x1e'),()=>_0xfc24c5[_0xf3c4('0x1e')]()),_0x1331cc;}}