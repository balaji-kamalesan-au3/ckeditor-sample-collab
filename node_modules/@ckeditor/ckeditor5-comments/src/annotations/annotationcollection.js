/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3e93=['left','updateTargetRect','delete','has','_viewToAnnotation','targetRect','add','refreshPositioning','length','fire','getByView','_getOrderInContent','change:isFocused','getByInnerView','_focusTracker','annotationcollection-not-existing-item','_sort','destroy','listenTo','top','set','blur','isFocused','view','_items','focusableElements','remove','innerView','_innerViewToAnnotation','annotationcollection-duplicated-item','clear','sort','focusTracker','stopListening'];(function(_0x479d88,_0x3e9369){const _0x379386=function(_0x58b5c6){while(--_0x58b5c6){_0x479d88['push'](_0x479d88['shift']());}};_0x379386(++_0x3e9369);}(_0x3e93,0x191));const _0x3793=function(_0x479d88,_0x3e9369){_0x479d88=_0x479d88-0x0;let _0x379386=_0x3e93[_0x479d88];return _0x379386;};import{CKEditorError as _0x554d4b,Collection as _0x166c2d,FocusTracker as _0x250cb3}from'ckeditor5/src/utils';export default class x extends _0x166c2d{constructor(_0x46f207=[]){super(),this['_innerViewToAnnotation']=new Map(),this[_0x3793('0xb')]=new Map(),this['_focusTracker']=new _0x250cb3(),this[_0x3793('0x15')]['on'](_0x3793('0x13'),(_0x9eb952,_0x22b00d,_0x232ec7)=>{_0x232ec7||this[_0x3793('0x10')](_0x3793('0x1c'));});for(const _0x398884 of _0x46f207)this['add'](_0x398884);}get[_0x3793('0x1d')](){return this[_0x3793('0x15')][_0x3793('0x1d')];}[_0x3793('0xd')](_0x1e2d20){if(this[_0x3793('0xa')](_0x1e2d20))throw new _0x554d4b(_0x3793('0x2'),null);this[_0x3793('0x1')][_0x3793('0x1b')](_0x1e2d20['innerView'],_0x1e2d20),this[_0x3793('0xb')][_0x3793('0x1b')](_0x1e2d20['view'],_0x1e2d20);for(const _0x482e24 of _0x1e2d20[_0x3793('0x20')])this[_0x3793('0x15')]['add'](_0x482e24);this[_0x3793('0x19')](_0x1e2d20[_0x3793('0x20')],_0x3793('0xd'),(_0x5a197a,_0x3ee133)=>{this[_0x3793('0x15')][_0x3793('0xd')](_0x3ee133);}),this['listenTo'](_0x1e2d20[_0x3793('0x20')],'remove',(_0x428cfe,_0x15350c)=>{this[_0x3793('0x15')][_0x3793('0x21')](_0x15350c);}),this[_0x3793('0x19')](_0x1e2d20[_0x3793('0x1e')][_0x3793('0x5')],_0x3793('0x13'),(_0x6c09c1,_0x1633ac,_0x12583d)=>{_0x12583d&&this[_0x3793('0x10')]('focus',_0x1e2d20);}),_0x1e2d20[_0x3793('0x8')]();const _0x22cd6e=this[_0x3793('0x12')](_0x1e2d20[_0x3793('0x1e')]['targetRect']);super['add'](_0x1e2d20,_0x22cd6e);}[_0x3793('0x21')](_0x3c0861){if(!this[_0x3793('0xa')](_0x3c0861))throw new _0x554d4b(_0x3793('0x16'),null);this[_0x3793('0x6')](_0x3c0861[_0x3793('0x1e')]['focusTracker']),this[_0x3793('0x6')](_0x3c0861[_0x3793('0x20')]);for(const _0x3f42d9 of _0x3c0861[_0x3793('0x20')])this[_0x3793('0x15')][_0x3793('0x21')](_0x3f42d9);this['_viewToAnnotation']['delete'](_0x3c0861[_0x3793('0x1e')]),this[_0x3793('0x1')][_0x3793('0x9')](_0x3c0861[_0x3793('0x0')]),super[_0x3793('0x21')](_0x3c0861);}[_0x3793('0x14')](_0x5d7050){return this['_innerViewToAnnotation']['get'](_0x5d7050);}[_0x3793('0x11')](_0x45186b){return this[_0x3793('0xb')]['get'](_0x45186b);}[_0x3793('0x18')](){super[_0x3793('0x3')](),this[_0x3793('0x6')](),this[_0x3793('0x1')]['clear'](),this[_0x3793('0xb')][_0x3793('0x3')](),this[_0x3793('0x15')]['destroy']();}[_0x3793('0xe')](){for(const _0x18c426 of this)_0x18c426['updateTargetRect']();this[_0x3793('0x17')]();}['_sort'](){const _0x73f9df=Array['from'](this)[_0x3793('0x4')]((_0x5842d2,_0x2ce562)=>y(_0x5842d2['view'][_0x3793('0xc')],_0x2ce562['view']['targetRect']));for(let _0x189602=_0x73f9df['length']-0x1;_0x189602>0x0;_0x189602--){const _0x5df77b=_0x73f9df[_0x189602];_0x189602!==this['getIndex'](_0x5df77b)&&(this['remove'](_0x5df77b),this[_0x3793('0xd')](_0x5df77b,_0x189602));}}[_0x3793('0x12')](_0x2d582e){let _0x8e68c6=0x0;if(!_0x2d582e)return this[_0x3793('0x1f')][_0x3793('0xf')];for(const _0x5a2f03 of this){const _0x4e949c=_0x5a2f03['view'][_0x3793('0xc')];if(_0x4e949c){if(y(_0x2d582e,_0x4e949c)<0x0)return _0x8e68c6;_0x8e68c6++;}}return _0x8e68c6;}}export function bindAnnotationCollections({source:_0x38cd7e,target:_0x42cc08,filter:_0x4b3206}){for(const _0x5b45cb of _0x38cd7e)_0x4b3206(_0x5b45cb)&&_0x42cc08[_0x3793('0xd')](_0x5b45cb);_0x42cc08['listenTo'](_0x38cd7e,_0x3793('0xd'),(_0x18078b,_0x53047f)=>{_0x4b3206(_0x53047f)&&_0x42cc08[_0x3793('0xd')](_0x53047f);}),_0x42cc08[_0x3793('0x19')](_0x38cd7e,_0x3793('0x21'),(_0x9f8b59,_0x309b7e)=>{_0x42cc08['has'](_0x309b7e)&&_0x42cc08[_0x3793('0x21')](_0x309b7e);});}function y(_0x4afbaa,_0x2b8a0b){if(null===_0x4afbaa&&null===_0x2b8a0b)return 0x0;if(null===_0x4afbaa)return-0x1;if(null===_0x2b8a0b)return 0x1;const _0x48906e=_0x4afbaa[_0x3793('0x1a')]-_0x2b8a0b[_0x3793('0x1a')];return 0x0==_0x48906e?_0x4afbaa[_0x3793('0x7')]-_0x2b8a0b[_0x3793('0x7')]:_0x48906e;}