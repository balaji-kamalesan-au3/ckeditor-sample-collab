/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5c9e=['pluginName','_activateAnnotation','collection','deactivateAll','_bindAnnotationsToVisibleAnnotations','_visibleAnnotations','has','remove','activeAnnotations','source','change:isVisible','delete','stopListening','isVisible','refreshVisibility','createAnnotation','fire','listenTo','set','refreshPositioning','destroy','_addActiveAnnotation','createAnnotationView','activate','add','getByInnerView','_deactivateAllAnnotations'];(function(_0x5ecb97,_0x5c9e6e){const _0x377dcd=function(_0x568413){while(--_0x568413){_0x5ecb97['push'](_0x5ecb97['shift']());}};_0x377dcd(++_0x5c9e6e);}(_0x5c9e,0x1f2));const _0x377d=function(_0x5ecb97,_0x5c9e6e){_0x5ecb97=_0x5ecb97-0x0;let _0x377dcd=_0x5c9e[_0x5ecb97];return _0x377dcd;};import{ContextPlugin as _0x26904a}from'ckeditor5/src/core';import _0x44c128 from'./annotation';import _0x63318d from'./annotationcollection';import _0x271de7 from'./view/annotationview';export default class V extends _0x26904a{static get[_0x377d('0xf')](){return'Annotations';}constructor(_0x1fd997){super(_0x1fd997),this[_0x377d('0x11')]=new _0x63318d(),this[_0x377d('0x14')]=new _0x63318d(),this[_0x377d('0x6')](_0x377d('0x17'),new Set()),this['_bindAnnotationsToVisibleAnnotations']();}[_0x377d('0xc')](_0x55bc75){this[_0x377d('0x11')][_0x377d('0xc')](_0x55bc75);}['remove'](_0x3a4eb5){this['collection'][_0x377d('0x16')](_0x3a4eb5),_0x3a4eb5['destroy']();}[_0x377d('0x2')](){for(const _0x334266 of this[_0x377d('0x11')])_0x334266[_0x377d('0x2')]();}[_0x377d('0x7')](){this[_0x377d('0x14')]['refreshPositioning']();}[_0x377d('0xd')](_0x3a258d){return this[_0x377d('0x11')][_0x377d('0xd')](_0x3a258d);}[_0x377d('0x12')](){this[_0x377d('0x4')](_0x377d('0xe'));}[_0x377d('0x8')](){for(const _0xeb0c3 of this[_0x377d('0x11')])_0xeb0c3[_0x377d('0x8')]();this[_0x377d('0x14')][_0x377d('0x8')](),this[_0x377d('0x11')][_0x377d('0x8')](),super[_0x377d('0x8')]();}[_0x377d('0xb')](_0x7b7c0e){this[_0x377d('0x4')](_0x377d('0x10'),_0x7b7c0e);}[_0x377d('0x3')](_0x2c355b){return new _0x44c128(_0x2c355b);}[_0x377d('0xa')](_0x5d11ca,_0xa5bf01){return new _0x271de7(_0x5d11ca,_0xa5bf01);}[_0x377d('0x9')](_0x2eeb7f){const _0x3d2849=new Set(this[_0x377d('0x17')]);_0x3d2849[_0x377d('0xc')](_0x2eeb7f),this[_0x377d('0x17')]=_0x3d2849;}['_removeActiveAnnotation'](_0x1cffd3){const _0xa5bfbe=new Set(this[_0x377d('0x17')]);_0xa5bfbe[_0x377d('0x1a')](_0x1cffd3),this[_0x377d('0x17')]=_0xa5bfbe;}[_0x377d('0x13')](){const _0x5a37dd=this[_0x377d('0x11')],_0x119030=this[_0x377d('0x14')];function _0x2563ed(_0x1c66ed){const _0x283f07=_0x1c66ed[_0x377d('0x18')];_0x283f07[_0x377d('0x1')]&&!_0x119030[_0x377d('0x15')](_0x283f07)?_0x119030[_0x377d('0xc')](_0x283f07):!_0x283f07[_0x377d('0x1')]&&_0x119030['has'](_0x283f07)&&_0x119030[_0x377d('0x16')](_0x283f07);}this['listenTo'](_0x5a37dd,_0x377d('0xc'),(_0x242dea,_0x112c3b)=>{_0x112c3b['isVisible']&&_0x119030[_0x377d('0xc')](_0x112c3b),this[_0x377d('0x5')](_0x112c3b,_0x377d('0x19'),_0x2563ed);}),this[_0x377d('0x5')](_0x5a37dd,_0x377d('0x16'),(_0x24b5d8,_0x20912c)=>{_0x119030[_0x377d('0x15')](_0x20912c)&&_0x119030['remove'](_0x20912c),this[_0x377d('0x0')](_0x20912c,_0x377d('0x19'),_0x2563ed);});}}