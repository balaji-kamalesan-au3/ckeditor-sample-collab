/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2ca3=['_annotations','cancel','stop','get','focus','_refreshPositioningDebounced','Sidebar','refresh','_destroyEditorAnnotationsIntegration','removeEventListener','isAttached','ready','attach','_integrateWithEditorAnnotations','from','wideSidebar','rearrange','addEventListener','high','_activeAnnotation','EditorAnnotations','plugins','updateTargetRect','context','container','activeAnnotation','add','blur','change:container','refreshPositioning','listenTo','stopListening','setActiveAnnotation','resize','hasDomSelection','uiUpdate','editors','widesidebar-attach-already-attached','widesidebar-detach-not-attached','register','_editorAnnotations','annotations','init','detach','remove'];(function(_0x2ad79c,_0x2ca35d){const _0x20c3e8=function(_0x338d3e){while(--_0x338d3e){_0x2ad79c['push'](_0x2ad79c['shift']());}};_0x20c3e8(++_0x2ca35d);}(_0x2ca3,0x118));const _0x20c3=function(_0x2ad79c,_0x2ca35d){_0x2ad79c=_0x2ad79c-0x0;let _0x20c3e8=_0x2ca3[_0x2ad79c];return _0x20c3e8;};import{ContextPlugin as _0x1f84de}from'ckeditor5/src/core';import _0x45bd45 from'./annotationsuis';import _0x395a69 from'./sidebar';import{CKEditorError as _0x5dd946,Collection as _0xf03de1}from'ckeditor5/src/utils';import{debounce as _0x2a429b}from'lodash-es';export default class i extends _0x1f84de{static get['requires'](){return[_0x395a69,_0x45bd45];}static get['pluginName'](){return'WideSidebar';}constructor(_0x2b9ff7){super(_0x2b9ff7),this['isAttached']=!0x1,this['set'](_0x20c3('0xf'),null),this[_0x20c3('0x1f')]=null,this['_editorAnnotations']=new _0xf03de1(),this['_refreshPositioningDebounced']=_0x2a429b(()=>{this[_0x20c3('0x1f')][_0x20c3('0x13')]();},0xfa,{'leading':!0x1});}[_0x20c3('0x20')](){const _0x1ebc32=this['context'][_0x20c3('0xb')][_0x20c3('0x26')](_0x45bd45),_0x422437=this['context']['plugins'][_0x20c3('0x26')](_0x395a69);_0x1ebc32[_0x20c3('0x1d')](_0x20c3('0x5'),this),_0x422437[_0x20c3('0xe')]&&_0x1ebc32['switchTo'](_0x20c3('0x5'));}[_0x20c3('0x16')](_0x4ec336){if(_0x4ec336===this[_0x20c3('0xf')])return;const _0x1482bd=this[_0x20c3('0xd')]['plugins']['get'](_0x395a69);_0x1482bd[_0x20c3('0x9')]=_0x4ec336;const _0x436f3e=this[_0x20c3('0xf')];this[_0x20c3('0xf')]=_0x4ec336,_0x1482bd[_0x20c3('0x2a')]({'blurredAnnotation':_0x436f3e,'activatedAnnotation':this[_0x20c3('0xf')]});}[_0x20c3('0x2')](_0x49b394){this[_0x20c3('0x1f')]=_0x49b394;const _0x5747f5=this[_0x20c3('0xd')][_0x20c3('0xb')][_0x20c3('0x26')](_0x20c3('0x29'));if(_0x5747f5[_0x20c3('0x23')]=_0x49b394,this[_0x20c3('0x0')])throw new _0x5dd946(_0x20c3('0x1b'),this);this['isAttached']=!0x0,this['listenTo'](_0x5747f5,'set:container',()=>{this[_0x20c3('0x21')](),this['listenTo'](_0x5747f5,_0x20c3('0x12'),_0x5d7049=>{_0x5d7049['off'](),this[_0x20c3('0x2')](_0x49b394);});}),_0x5747f5['_attachToContainer']({'viewClass':'ck-sidebar--wide'});const _0x1a88e1=_0x424d95=>{_0x424d95[_0x20c3('0xc')](),_0x5747f5['addAnnotation'](_0x424d95);};for(const _0x1964b4 of _0x49b394)_0x1a88e1(_0x1964b4);this[_0x20c3('0x14')](_0x49b394,_0x20c3('0x10'),(_0x38dbae,_0x257e18)=>{_0x1a88e1(_0x257e18);}),this[_0x20c3('0x14')](_0x49b394,_0x20c3('0x22'),(_0x5980fb,_0x101f9e,_0x36a894)=>{_0x5747f5[_0x20c3('0x6')]({'removedAnnotation':_0x101f9e,'previousAnnotation':_0x49b394[_0x20c3('0x26')](_0x36a894-0x1),'nextAnnotation':_0x49b394[_0x20c3('0x26')](_0x36a894+0x1)}),_0x101f9e===this[_0x20c3('0xf')]&&this[_0x20c3('0x16')](null);},{'priority':_0x20c3('0x8')}),this[_0x20c3('0x14')](_0x49b394,_0x20c3('0x27'),(_0x4f4392,_0x200798)=>{this[_0x20c3('0x16')](_0x200798);}),this[_0x20c3('0x14')](_0x49b394,_0x20c3('0x11'),()=>{this[_0x20c3('0x16')](null);});const _0x239242=this[_0x20c3('0xd')][_0x20c3('0x1a')]?this[_0x20c3('0xd')]['editors']:new _0xf03de1([this['context']]);for(const _0xc0ede of _0x239242)this[_0x20c3('0x3')](_0xc0ede);this[_0x20c3('0x14')](_0x239242,'add',(_0x15a987,_0x3754d1)=>{this['listenTo'](_0x3754d1,_0x20c3('0x1'),()=>{this[_0x20c3('0x3')](_0x3754d1);});}),this['listenTo'](_0x239242,_0x20c3('0x22'),(_0x1d6ffb,_0x536358)=>{_0x536358[_0x20c3('0xb')]['has'](_0x20c3('0xa'))&&this[_0x20c3('0x2b')](_0x536358[_0x20c3('0xb')]['get'](_0x20c3('0xa')));}),window[_0x20c3('0x7')](_0x20c3('0x17'),this[_0x20c3('0x28')]),this[_0x20c3('0x1f')][_0x20c3('0x13')]();}['detach'](){if(!this[_0x20c3('0x0')])throw new _0x5dd946(_0x20c3('0x1c'),this);this[_0x20c3('0x16')](null);const _0x44aa0b=this[_0x20c3('0xd')][_0x20c3('0xb')][_0x20c3('0x26')](_0x395a69);_0x44aa0b['_detachFromContainer'](this['annotations']),this['stopListening'](_0x44aa0b),this[_0x20c3('0x15')](this['annotations']),this[_0x20c3('0x15')](this[_0x20c3('0xd')][_0x20c3('0x1a')]);for(const _0x1e8985 of Array[_0x20c3('0x4')](this[_0x20c3('0x1e')]))this[_0x20c3('0x2b')](_0x1e8985);window[_0x20c3('0x2c')](_0x20c3('0x17'),this[_0x20c3('0x28')]),this['_refreshPositioningDebounced'][_0x20c3('0x24')](),this['activeAnnotation']=null,this[_0x20c3('0x0')]=!0x1,this['annotations']=null;}['destroy'](){this[_0x20c3('0x0')]&&this[_0x20c3('0x21')]();}[_0x20c3('0x3')](_0x562584){const _0x5513b0=_0x562584[_0x20c3('0xb')][_0x20c3('0x26')]('EditorAnnotations');if(!_0x5513b0)return;const _0x52bbb2=()=>{const _0x1d7763=_0x5513b0['getOrderedSelectedAnnotations']({'annotations':this[_0x20c3('0x1f')],'activeAnnotation':this['activeAnnotation']});this[_0x20c3('0x16')](_0x1d7763[0x0]||null);};this[_0x20c3('0x14')](_0x5513b0,_0x20c3('0x2a'),_0x52bbb2),this[_0x20c3('0x14')](_0x5513b0,_0x20c3('0x11'),(_0x566d40,{isAnnotationTracked:_0xfab3d6})=>{this[_0x20c3('0xf')]&&_0xfab3d6(this[_0x20c3('0xf')])&&this[_0x20c3('0x16')](null);}),this[_0x20c3('0x14')](_0x5513b0,_0x20c3('0x19'),()=>{this[_0x20c3('0x28')]();}),this[_0x20c3('0x14')](this[_0x20c3('0x1f')],'blur',_0x23a35d=>{_0x5513b0[_0x20c3('0x18')]()&&(_0x52bbb2(),_0x23a35d[_0x20c3('0x25')]());},{'priority':_0x20c3('0x8')}),this[_0x20c3('0x1e')][_0x20c3('0x10')](_0x5513b0);}[_0x20c3('0x2b')](_0xac1ec9){_0xac1ec9&&(this[_0x20c3('0x15')](_0xac1ec9),this['_editorAnnotations']['remove'](_0xac1ec9));}}