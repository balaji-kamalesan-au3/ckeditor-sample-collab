/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x67c8=['_targetTop','list','max','_annotationToSidebarItemView','top','locale','class','minHeight','get','rearrange','config','updateHeight','sidebar.preventScrollOutOfView','_detachFromContainer','_getItemAfter','stopListening','_alignForBottomChange','change:top','set','change:_lastItem','_lastItem','_alignToTargetRect','_activeAnnotation','element','isAnimationDisabled','sidebar.container','_destroySidebarItemView','init','height','_alignAfterItem','pluginName','bind','last','_updateLastItem','_getItemBefore','remove','bottom','_getMaxAvailableTop','_createSidebarView','context','target','container','addAnnotation','clear','view','_sidebarItemViewToAnnotation','sidebar-setcontainer-invalid-element','push','_alignBeforeItem','isActive','targetRect','_alignForTopChange','getIndex','Sidebar','_setItemTop','listenTo','_recalculate','getSidebarItemView','length','_recalculateBuffer','refresh','_getTargetTop','change:targetRect','_spaceBetweenItems','content','_annotations','sidebar-attachtocontainer-missing-container','delete','destroy','define'];(function(_0xc88983,_0x67c8ee){const _0x1fdb7f=function(_0x223427){while(--_0x223427){_0xc88983['push'](_0xc88983['shift']());}};_0x1fdb7f(++_0x67c8ee);}(_0x67c8,0x98));const _0x1fdb=function(_0xc88983,_0x67c8ee){_0xc88983=_0xc88983-0x0;let _0x1fdb7f=_0x67c8[_0xc88983];return _0x1fdb7f;};import{ContextPlugin as _0x14ac9c}from'ckeditor5/src/core';import _0x1f8007 from'./view/sidebarview';import _0x45ed9c from'./view/sidebaritemview';import{Rect as _0x32c599,CKEditorError as _0x2da2a2}from'ckeditor5/src/utils';export default class b extends _0x14ac9c{static get[_0x1fdb('0x12')](){return _0x1fdb('0x29');}constructor(_0x32ef9b){super(_0x32ef9b),this['set'](_0x1fdb('0x8')),this[_0x1fdb('0x20')]=this[_0x1fdb('0x1a')](),this['set'](_0x1fdb('0x1d'),null),this[_0x1fdb('0x33')]=0x19,this[_0x1fdb('0x21')]=new Map(),this['_annotationToSidebarItemView']=new Map(),this[_0x1fdb('0x1b')][_0x1fdb('0x44')][_0x1fdb('0x39')]('sidebar.preventScrollOutOfView',!0x1),this[_0x1fdb('0x35')]=null,this[_0x1fdb('0xa')]=null,this[_0x1fdb('0x2f')]=[];}[_0x1fdb('0xf')](){const _0x59751b=this[_0x1fdb('0x1b')][_0x1fdb('0x44')][_0x1fdb('0x42')](_0x1fdb('0xd'));_0x59751b&&this['setContainer'](_0x59751b);}['setContainer'](_0x51e188){if(!p(_0x51e188))throw new _0x2da2a2(_0x1fdb('0x22'));this['container']=_0x51e188;}['_attachToContainer']({viewClass:_0x500dd3='',spaceBetweenItems:_0x2b3a42=0x19}={}){if(!p(this['container']))throw new _0x2da2a2(_0x1fdb('0x36'),this);this[_0x1fdb('0x1d')]['appendChild'](this['view'][_0x1fdb('0xb')]),this[_0x1fdb('0x20')][_0x1fdb('0x40')]=_0x500dd3,this[_0x1fdb('0x33')]=_0x2b3a42;}[_0x1fdb('0x43')]({removedAnnotation:_0x489f60,previousAnnotation:_0x5cad31,nextAnnotation:_0x1196ef}){const _0x5ad1d4=this['getSidebarItemView'](_0x489f60);this[_0x1fdb('0x20')][_0x1fdb('0x3b')][_0x1fdb('0x17')](_0x5ad1d4),this[_0x1fdb('0xe')](_0x489f60),_0x5cad31&&this[_0x1fdb('0x9')](this[_0x1fdb('0x2d')](_0x5cad31)),_0x1196ef&&this[_0x1fdb('0x9')](this[_0x1fdb('0x2d')](_0x1196ef)),this['_updateLastItem']();}[_0x1fdb('0x30')]({blurredAnnotation:_0x1e18c0,activatedAnnotation:_0x5c4749,disableAnimationOnActivatedAnnotation:_0x49ce93}){if(this[_0x1fdb('0xa')]=_0x5c4749,_0x1e18c0){_0x1e18c0['isActive']=!0x1;const _0x5d7d61=this[_0x1fdb('0x2d')](_0x1e18c0);_0x5d7d61&&_0x49ce93&&(_0x5d7d61[_0x1fdb('0xc')]=!0x1);}if(_0x5c4749){const _0x2219b7=this[_0x1fdb('0x2d')](_0x5c4749);_0x2219b7&&(_0x5c4749[_0x1fdb('0x25')]=!0x0,_0x49ce93&&(_0x2219b7[_0x1fdb('0xc')]=!0x0,_0x2219b7[_0x1fdb('0x3e')]+=0x1),this[_0x1fdb('0x9')](_0x2219b7));}}[_0x1fdb('0x1')](_0x4a3bb2){this['stopListening'](),this[_0x1fdb('0x20')]['element']['remove']();for(const _0x330074 of _0x4a3bb2)this[_0x1fdb('0xe')](_0x330074);this[_0x1fdb('0x20')][_0x1fdb('0x3b')][_0x1fdb('0x1f')](),this[_0x1fdb('0x20')][_0x1fdb('0x40')]='',this['_lastItem']=null;}[_0x1fdb('0x1e')](_0x2382a1,_0x2869a8){_0x2869a8||(_0x2869a8=_0x2382a1[_0x1fdb('0x20')]);const _0x12c7df=new _0x45ed9c(this['context'][_0x1fdb('0x3f')]);this[_0x1fdb('0x21')][_0x1fdb('0x6')](_0x12c7df,_0x2382a1),this[_0x1fdb('0x3d')][_0x1fdb('0x6')](_0x2382a1,_0x12c7df),_0x12c7df['content']['add'](_0x2869a8),this[_0x1fdb('0x2b')](_0x2382a1[_0x1fdb('0x20')],_0x1fdb('0x32'),(_0x4d7025,_0x3ed14f,_0x3dff5b)=>{const _0x36ec7b=this[_0x1fdb('0x31')](_0x2382a1,_0x3dff5b);_0x12c7df[_0x1fdb('0x3a')]!=_0x36ec7b&&(_0x12c7df['_targetTop']=_0x36ec7b,this[_0x1fdb('0x2a')](_0x12c7df,_0x36ec7b));}),this[_0x1fdb('0x2b')](_0x12c7df,_0x1fdb('0x5'),()=>{this[_0x1fdb('0x2c')](_0x12c7df,_0x1fdb('0x3e'));}),this['listenTo'](_0x12c7df,'change:bottom',()=>{this[_0x1fdb('0x2c')](_0x12c7df,_0x1fdb('0x18'));}),this[_0x1fdb('0x9')](_0x12c7df);const _0x57b6be=this[_0x1fdb('0x16')](_0x12c7df);if(_0x57b6be)this[_0x1fdb('0x11')](_0x57b6be,_0x12c7df)||this[_0x1fdb('0x9')](_0x12c7df);else this[_0x1fdb('0x9')](_0x12c7df);return this[_0x1fdb('0x15')](),this['view'][_0x1fdb('0x3b')]['add'](_0x12c7df),_0x12c7df;}[_0x1fdb('0x27')](_0x30cfea){if(!_0x30cfea[_0x1fdb('0x34')][_0x1fdb('0x2e')])return;const _0x1a20eb=this[_0x1fdb('0x16')](_0x30cfea);if(!_0x1a20eb)return;const _0x52d651=this[_0x1fdb('0x21')]['get'](_0x1a20eb),_0x4a6559=this[_0x1fdb('0xa')];_0x4a6559&&_0x4a6559===_0x52d651?this[_0x1fdb('0x11')](_0x1a20eb,_0x30cfea):this['_alignBeforeItem'](_0x30cfea,_0x1a20eb);}[_0x1fdb('0x4')](_0x2549c0){if(!_0x2549c0[_0x1fdb('0x34')][_0x1fdb('0x2e')])return;const _0x5afca3=this[_0x1fdb('0x2')](_0x2549c0);if(!_0x5afca3)return;const _0x92980a=this['_sidebarItemViewToAnnotation'][_0x1fdb('0x42')](_0x5afca3),_0x515bbe=this[_0x1fdb('0x1b')][_0x1fdb('0x44')][_0x1fdb('0x42')]('sidebar.preventScrollOutOfView'),_0xab277=this[_0x1fdb('0xa')];_0xab277&&_0xab277===_0x92980a&&_0x515bbe?(this[_0x1fdb('0x24')](_0x5afca3,_0x2549c0),this[_0x1fdb('0x11')](_0x2549c0,_0x5afca3)):_0xab277&&_0xab277===_0x92980a?this['_alignBeforeItem'](_0x5afca3,_0x2549c0):this[_0x1fdb('0x11')](_0x2549c0,_0x5afca3);}['_recalculate'](_0x7c7691,_0xd7dc73){0x0===this[_0x1fdb('0x2f')][_0x1fdb('0x2e')]&&setTimeout(()=>{for(const {sidebarItemView:_0xb2b2f3,changedProp:_0x1898eb}of this[_0x1fdb('0x2f')])_0x1fdb('0x3e')===_0x1898eb?this['_alignForTopChange'](_0xb2b2f3):this[_0x1fdb('0x4')](_0xb2b2f3);this[_0x1fdb('0x2f')]=[];},0xa),this['_recalculateBuffer'][_0x1fdb('0x23')]({'sidebarItemView':_0x7c7691,'changedProp':_0xd7dc73});}['getSidebarItemView'](_0x78c40){return this[_0x1fdb('0x3d')][_0x1fdb('0x42')](_0x78c40);}['destroy'](){this[_0x1fdb('0x20')]['destroy']();}[_0x1fdb('0xe')](_0x428426){const _0x2e3c89=this['getSidebarItemView'](_0x428426);this[_0x1fdb('0x3')](_0x2e3c89),this[_0x1fdb('0x3')](_0x428426['view']),_0x2e3c89[_0x1fdb('0x38')](),this[_0x1fdb('0x3d')][_0x1fdb('0x37')](_0x428426),this['_sidebarItemViewToAnnotation']['delete'](_0x2e3c89);}[_0x1fdb('0x1a')](){const _0x3b9883=new _0x1f8007(this[_0x1fdb('0x1b')][_0x1fdb('0x3f')]);return _0x3b9883['render'](),this['on'](_0x1fdb('0x7'),(_0x5d3adf,_0x3e561d,_0x5bfc2d,_0x30d65e)=>{_0x30d65e&&_0x3b9883['unbind'](_0x1fdb('0x41')),_0x5bfc2d?_0x3b9883[_0x1fdb('0x13')](_0x1fdb('0x41'))['to'](_0x5bfc2d,_0x1fdb('0x18')):_0x3b9883[_0x1fdb('0x41')]=null;}),_0x3b9883;}[_0x1fdb('0x15')](){this[_0x1fdb('0x8')]=this[_0x1fdb('0x2d')](this[_0x1fdb('0x35')][_0x1fdb('0x14')]);}[_0x1fdb('0x16')](_0x27b0a8){const _0x2e1b6e=this[_0x1fdb('0x21')][_0x1fdb('0x42')](_0x27b0a8),_0x3b6e95=this[_0x1fdb('0x35')][_0x1fdb('0x42')](this['_annotations'][_0x1fdb('0x28')](_0x2e1b6e)-0x1);return _0x3b6e95&&this[_0x1fdb('0x2d')](_0x3b6e95);}[_0x1fdb('0x2')](_0x24ec3f){const _0x43ae06=this[_0x1fdb('0x21')][_0x1fdb('0x42')](_0x24ec3f),_0x34cc38=this['_annotations'][_0x1fdb('0x42')](this['_annotations'][_0x1fdb('0x28')](_0x43ae06)+0x1);return _0x34cc38&&this[_0x1fdb('0x2d')](_0x34cc38);}[_0x1fdb('0x24')](_0x4debe6,_0x29261a){_0x4debe6[_0x1fdb('0x45')]();const _0x2ab127=C(_0x29261a[_0x1fdb('0x18')]+this[_0x1fdb('0x33')],_0x4debe6[_0x1fdb('0x3e')]);return!!_0x2ab127&&(this[_0x1fdb('0x2a')](_0x29261a,_0x29261a['top']-_0x2ab127),!0x0);}[_0x1fdb('0x11')](_0x40e18e,_0x4d7569){_0x40e18e[_0x1fdb('0x45')]();const _0x367aad=C(_0x40e18e[_0x1fdb('0x18')]+this[_0x1fdb('0x33')],_0x4d7569[_0x1fdb('0x3e')]);return!!_0x367aad&&(this['_setItemTop'](_0x4d7569,_0x4d7569['top']+_0x367aad,!0x1),!0x0);}[_0x1fdb('0x9')](_0xa93c39){const _0x202692=this[_0x1fdb('0x21')][_0x1fdb('0x42')](_0xa93c39);if(!_0x202692||!_0x202692['target'])return;const _0x12ce37=this[_0x1fdb('0x31')](_0x202692,_0x202692[_0x1fdb('0x26')]);this[_0x1fdb('0x2a')](_0xa93c39,_0x12ce37);}['_getTargetTop'](_0x223105,_0x3bd144){if(null===_0x3bd144)return 0x0;if(_0x223105[_0x1fdb('0x1c')]instanceof _0x32c599)return _0x3bd144['top'];{const _0x342966=new _0x32c599(this[_0x1fdb('0x20')][_0x1fdb('0xb')])['top'];return _0x3bd144['top']-_0x342966;}}['_setItemTop'](_0x2f9e07,_0x155913,_0x1a283b=this[_0x1fdb('0x1b')][_0x1fdb('0x44')][_0x1fdb('0x42')](_0x1fdb('0x0'))){_0x1a283b&&(_0x155913=Math['max'](_0x155913,this[_0x1fdb('0x19')](_0x2f9e07))),_0x2f9e07['top']=_0x155913;}[_0x1fdb('0x19')](_0x4a9945){let _0x1d1f65=this[_0x1fdb('0x16')](_0x4a9945),_0x218c0b=0x0;for(;_0x1d1f65;)_0x1d1f65[_0x1fdb('0x45')](),_0x218c0b+=this['_spaceBetweenItems']+_0x1d1f65[_0x1fdb('0x10')],_0x1d1f65=this[_0x1fdb('0x16')](_0x1d1f65);return _0x218c0b;}}function C(_0x475001,_0x31597a){return Math[_0x1fdb('0x3c')](_0x475001-_0x31597a,0x0);}function p(_0x57f247){return null!==_0x57f247&&'object'==typeof _0x57f247&&0x1===_0x57f247['nodeType'];}