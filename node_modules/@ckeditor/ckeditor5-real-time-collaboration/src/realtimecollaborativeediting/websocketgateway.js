/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1259=['disconnect','stopListening','bind','then','cloudServices.connectionTimeout','disconnected','connection','WebSocketGateway','create','limitExceeded','cloudServices.requestTimeout','offline','init','change:me','listenTo','config','from','context','reconnect','requires','_reconnectionStack','function','webSocketUrl','isInReconnectionStack','_shouldPluginsReconnect','get','cloudservices-reconnection-error','delete','_isBrowserOffline','pluginName','destroy','addToReconnectionStack','plugins','cloudservices-init','state','connect','define','CloudServices','catch','has','removeFromReconnectionStack','all','initialReconnectionInterval','websocketgateway-missing-websocket-url','code','connected','error','constructor','showWarning','websocketgateway-invalid-plugin-interface','Connected\x20users\x20limit\x20exceeded','set','connecting','_domEmitter','token'];(function(_0x2ad686,_0x12597f){const _0x5ea777=function(_0x1018d5){while(--_0x1018d5){_0x2ad686['push'](_0x2ad686['shift']());}};_0x5ea777(++_0x12597f);}(_0x1259,0x118));const _0x5ea7=function(_0x2ad686,_0x12597f){_0x2ad686=_0x2ad686-0x0;let _0x5ea777=_0x1259[_0x2ad686];return _0x5ea777;};import{ContextPlugin as _0x41b78f}from'ckeditor5/src/core';import{DomEmitterMixin as _0x498da3,CKEditorError as _0x2777a4}from'ckeditor5/src/utils';import _0x528f63 from'@ckeditor/ckeditor-cloud-services-collaboration/src/websocketgateway/websocketgateway';import{Notification as _0x276e9e}from'ckeditor5/src/ui';export default class c extends _0x41b78f{static get[_0x5ea7('0xe')](){return[_0x5ea7('0x20'),_0x276e9e];}static get['pluginName'](){return _0x5ea7('0x2');}[_0x5ea7('0x7')](){const _0x8540d8=this[_0x5ea7('0xc')],_0x466868=_0x8540d8[_0x5ea7('0x1b')][_0x5ea7('0x14')](_0x5ea7('0x20')),_0x4c4427=_0x8540d8[_0x5ea7('0x1b')][_0x5ea7('0x14')](_0x276e9e);if(!_0x466868[_0x5ea7('0x31')])throw new _0x2777a4('websocketgateway-missing-token',this);if(!_0x466868[_0x5ea7('0x11')])throw new _0x2777a4(_0x5ea7('0x26'),this);return this['set'](_0x5ea7('0x1d'),_0x5ea7('0x2f')),this[_0x5ea7('0x2e')](_0x5ea7('0x17'),!0x1),this['_reconnectionStack']=new Set(),this[_0x5ea7('0x13')]=!0x1,this['_domEmitter']=Object[_0x5ea7('0x3')](_0x498da3),this['_domEmitter'][_0x5ea7('0x9')](window,_0x5ea7('0x6'),()=>this[_0x5ea7('0x17')]=!0x0),this[_0x5ea7('0x30')]['listenTo'](window,'online',()=>this[_0x5ea7('0x17')]=!0x1),this[_0x5ea7('0xc')][_0x5ea7('0xa')]['define'](_0x5ea7('0x36'),0xa),this['context'][_0x5ea7('0xa')][_0x5ea7('0x1f')]('cloudServices.requestTimeout',0x14),c[_0x5ea7('0x2')][_0x5ea7('0x1e')](_0x466868[_0x5ea7('0x31')],_0x466868[_0x5ea7('0x11')],{'disconnectOnUnload':!0x1,'timeout':0x3e8*this[_0x5ea7('0xc')][_0x5ea7('0xa')]['get'](_0x5ea7('0x36')),'requestTimeout':0x3e8*this[_0x5ea7('0xc')][_0x5ea7('0xa')][_0x5ea7('0x14')](_0x5ea7('0x5'))})[_0x5ea7('0x35')](_0xb19eef=>{if(this[_0x5ea7('0x1')]=_0xb19eef,this[_0x5ea7('0x34')](_0x5ea7('0x1d'))['to'](_0xb19eef,_0x5ea7('0x1d'),this,'_isBrowserOffline',(_0x1a874d,_0x1eb52a)=>(_0x5ea7('0x28')!==_0x1a874d&&(this[_0x5ea7('0x13')]=!0x0),_0x1eb52a||_0x5ea7('0x28')!==_0x1a874d?'disconnected':_0x5ea7('0x0')==this[_0x5ea7('0x1d')]&&this[_0x5ea7('0x13')]?(this['_shouldPluginsReconnect']=!0x1,this['_reconnect'](),_0x5ea7('0x2f')):'connected')),this[_0x5ea7('0x1')]['on']('error',(_0x10751d,_0x5b366f)=>{if(_0x5ea7('0x4')!==_0x5b366f[_0x5ea7('0x27')])throw console[_0x5ea7('0x29')](_0x5b366f),new _0x2777a4(_0x5ea7('0x1c'),null,{'originalError':_0x5b366f});_0x4c4427[_0x5ea7('0x2b')]('The\x20limit\x20of\x20maximum\x20concurrent\x20connections\x20that\x20the\x20collaboration\x20server\x20can\x20handle\x20has\x20been\x20reached.\x20Try\x20opening\x20the\x20document\x20again\x20in\x20a\x20few\x20minutes.\x20Please\x20contact\x20your\x20system\x20administrator\x20if\x20the\x20problem\x20persists.',{'title':_0x5ea7('0x2d'),'namespace':'real-time-collaboration'});}),!_0xb19eef['me'])return new Promise(_0x4e5fd8=>_0xb19eef['on'](_0x5ea7('0x8'),_0x4e5fd8));})['catch'](_0x5723c6=>{throw console[_0x5ea7('0x29')](_0x5723c6),new _0x2777a4(_0x5ea7('0x1c'),null,{'originalError':_0x5723c6});});}[_0x5ea7('0x1a')](_0x46098f){if(_0x5ea7('0x10')!=typeof _0x46098f[_0x5ea7('0xd')])throw new _0x2777a4(_0x5ea7('0x2c'),this);if(this[_0x5ea7('0x12')](_0x46098f))throw new _0x2777a4('websocketgateway-plugin-already-registered',this,{'name':_0x46098f[_0x5ea7('0x2a')][_0x5ea7('0x18')]});this['_reconnectionStack']['add'](_0x46098f);}[_0x5ea7('0x23')](_0x3a8368){this['_reconnectionStack'][_0x5ea7('0x16')](_0x3a8368);}[_0x5ea7('0x12')](_0x327f72){return this[_0x5ea7('0xf')][_0x5ea7('0x22')](_0x327f72);}['_reconnect'](){return this[_0x5ea7('0x1')][_0x5ea7('0xd')]()[_0x5ea7('0x35')](()=>Promise[_0x5ea7('0x24')](Array[_0x5ea7('0xb')](this[_0x5ea7('0xf')],_0x2f751f=>_0x2f751f[_0x5ea7('0xd')]())))[_0x5ea7('0x35')](()=>this[_0x5ea7('0x1d')]='connected')[_0x5ea7('0x21')](_0x53f83c=>{throw console[_0x5ea7('0x29')](_0x53f83c),new _0x2777a4(_0x5ea7('0x15'),this[_0x5ea7('0xc')]);});}['destroy'](){this[_0x5ea7('0x1')]&&this[_0x5ea7('0x1')][_0x5ea7('0x32')](),this[_0x5ea7('0x1d')]=_0x5ea7('0x0'),this['_domEmitter'][_0x5ea7('0x33')](),super[_0x5ea7('0x19')]();}}c[_0x5ea7('0x2')]=_0x528f63,c[_0x5ea7('0x25')]=0x3e8;