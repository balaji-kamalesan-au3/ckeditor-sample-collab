/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3ceb=['author','clear','commentThread','nodeAfter','addMarker','onAccept','accept','type','getItems','head','length','_onDiscard','start','attributes','isInContent','getMarkerNames','_onAccept','getFirstMarker','getMarkers','_saved','_onAttributesChange','getAllAdjacentSuggestions','set','getRanges','split','push','filter','decorate','isIntersecting','getRange','end','getContainedElement','isIntersectingWithRange','size','subType','next','addMarkerName','getMultiRangeId','substr','_model','reduce','_markerNames','data','getFirstRange','from','nodeBefore','markers','map','previous','discard','isMultiRange','removeMarker','get','change','removeMarkers','toJSON','hasComments','removeAttribute'];(function(_0x18957d,_0x3ceb3d){const _0x4c8b56=function(_0x287675){while(--_0x287675){_0x18957d['push'](_0x18957d['shift']());}};_0x4c8b56(++_0x3ceb3d);}(_0x3ceb,0xcb));const _0x4c8b=function(_0x18957d,_0x3ceb3d){_0x18957d=_0x18957d-0x0;let _0x4c8b56=_0x3ceb[_0x18957d];return _0x4c8b56;};import{Element as _0x35b3df}from'ckeditor5/src/engine';import{ObservableMixin as _0x131e64,mix as _0x2e8f74,uid as _0x2cba40}from'ckeditor5/src/utils';import{cloneDeep as _0x357bcf,isEqual as _0x5305f2,set as _0x142d6c,unset as _0x3b3aa5}from'lodash-es';export default class o{constructor(_0x593ca9,_0x1365d0){this['id']=_0x1365d0['id'],this[_0x4c8b('0x24')]=_0x1365d0[_0x4c8b('0x24')],this[_0x4c8b('0x5')]=_0x1365d0[_0x4c8b('0x5')]||null,this[_0x4c8b('0x1d')]=_0x1365d0[_0x4c8b('0x1d')],this['externalAuthor']=_0x1365d0['externalAuthor'],this[_0x4c8b('0xd')]=null,this['_model']=_0x593ca9,this[_0x4c8b('0x2d')]=_0x1365d0[_0x4c8b('0x22')],this['_onDiscard']=_0x1365d0['onDiscard'],this[_0x4c8b('0x31')]=_0x1365d0['onAttributesChange'],this[_0x4c8b('0xc')]=new Set(),this[_0x4c8b('0x33')]('createdAt',null),this[_0x4c8b('0x33')](_0x4c8b('0x2a'),_0x1365d0[_0x4c8b('0x2a')]||{}),this[_0x4c8b('0x33')](_0x4c8b('0x13'),null),this[_0x4c8b('0x33')](_0x4c8b('0x6'),null),this[_0x4c8b('0x33')](_0x4c8b('0x1f'),null),this[_0x4c8b('0x33')](_0x4c8b('0x30'),!0x1),this[_0x4c8b('0x38')](_0x4c8b('0x23')),this[_0x4c8b('0x38')]('discard');}get[_0x4c8b('0x26')](){let _0xd27067=this;for(;_0xd27067[_0x4c8b('0x13')];)_0xd27067=_0xd27067['previous'];return _0xd27067;}get[_0x4c8b('0x1b')](){return!!this[_0x4c8b('0x1f')]&&this[_0x4c8b('0x1f')][_0x4c8b('0x27')]>0x0;}get[_0x4c8b('0x15')](){if(0x0==this[_0x4c8b('0xc')][_0x4c8b('0x4')])return!0x1;return 0x6==Array[_0x4c8b('0xf')](this[_0x4c8b('0xc')])[0x0][_0x4c8b('0x35')](':')[_0x4c8b('0x27')];}get[_0x4c8b('0x2b')](){return null!==this[_0x4c8b('0x2e')]();}[_0x4c8b('0x7')](_0x2e7383){this[_0x4c8b('0xc')]['add'](_0x2e7383);}[_0x4c8b('0x2c')](){return Array[_0x4c8b('0xf')](this[_0x4c8b('0xc')]);}['getMarkers'](){return this[_0x4c8b('0x2c')]()[_0x4c8b('0x12')](_0x416e2b=>this[_0x4c8b('0xa')][_0x4c8b('0x11')][_0x4c8b('0x17')](_0x416e2b))[_0x4c8b('0x37')](_0x1d4b46=>_0x1d4b46);}['getFirstMarker'](){return this[_0x4c8b('0x2f')]()[0x0]||null;}[_0x4c8b('0x19')](){this[_0x4c8b('0xa')]['change'](_0xcf604=>{for(const _0x13ac12 of this[_0x4c8b('0x2f')]())_0xcf604[_0x4c8b('0x16')](_0x13ac12);}),this['_markerNames'][_0x4c8b('0x1e')]();}[_0x4c8b('0x16')](_0x320d24){this[_0x4c8b('0xa')][_0x4c8b('0x18')](_0x2d528c=>{_0x2d528c[_0x4c8b('0x16')](_0x320d24);}),this[_0x4c8b('0xc')]['delete'](_0x320d24);}['addRange'](_0x4c4355){const _0x5e7335='suggestion:'+this[_0x4c8b('0x24')]+':'+this[_0x4c8b('0x5')]+':'+this['id']+':'+this[_0x4c8b('0x1d')]['id']+':'+o[_0x4c8b('0x8')]();this[_0x4c8b('0x7')](_0x5e7335),this[_0x4c8b('0xa')]['change'](_0x505086=>{_0x505086[_0x4c8b('0x21')](_0x5e7335,{'range':_0x4c4355,'usingOperation':!0x0,'affectsData':!0x0});});}[_0x4c8b('0x3')](_0x2bb845){for(const _0x3f5472 of this[_0x4c8b('0x34')]())if(_0x3f5472[_0x4c8b('0x39')](_0x2bb845))return!0x0;return!0x1;}[_0x4c8b('0x34')](){return this[_0x4c8b('0x2f')]()[_0x4c8b('0x12')](_0x1a264d=>_0x1a264d[_0x4c8b('0x0')]());}[_0x4c8b('0x25')](){return this[_0x4c8b('0x34')]()[_0x4c8b('0xb')]((_0x184797,_0x267bed)=>[..._0x184797,..._0x267bed[_0x4c8b('0x25')]()],[]);}[_0x4c8b('0xe')](){return this[_0x4c8b('0x2e')]()[_0x4c8b('0x0')]();}[_0x4c8b('0x2')](){const _0xf61b82=this['getRanges']();if(0x1!=_0xf61b82['length'])return null;const _0x3d8661=_0xf61b82[0x0],_0x3b4e15=_0x3d8661[_0x4c8b('0x29')][_0x4c8b('0x20')],_0x5e0f5e=_0x3d8661[_0x4c8b('0x1')][_0x4c8b('0x10')];return _0x3b4e15 instanceof _0x35b3df?_0x3b4e15!=_0x5e0f5e?null:_0x3b4e15:null;}[_0x4c8b('0x23')](){this[_0x4c8b('0x2d')](this[_0x4c8b('0x34')](),this[_0x4c8b('0xd')],this['attributes']),this['removeMarkers']();}[_0x4c8b('0x14')](){this[_0x4c8b('0x28')](this['getRanges'](),this[_0x4c8b('0xd')],this[_0x4c8b('0x2a')]),this[_0x4c8b('0x19')]();}[_0x4c8b('0x32')](){const _0x45d742=[];let _0x4ad1d6=this[_0x4c8b('0x26')];for(;_0x4ad1d6;)_0x45d742[_0x4c8b('0x36')](_0x4ad1d6),_0x4ad1d6=_0x4ad1d6[_0x4c8b('0x6')];return _0x45d742;}['setAttribute'](_0x458eeb,_0x187ed9){const _0x12c31a=_0x357bcf(this[_0x4c8b('0x2a')]);_0x142d6c(_0x12c31a,_0x458eeb,_0x187ed9),_0x5305f2(_0x12c31a,this['attributes'])||(this[_0x4c8b('0x2a')]=_0x12c31a,this[_0x4c8b('0x31')](_0x12c31a));}[_0x4c8b('0x1c')](_0x9d5f30){const _0x5809ca=_0x357bcf(this[_0x4c8b('0x2a')]);_0x3b3aa5(_0x5809ca,_0x9d5f30),_0x5305f2(_0x5809ca,this[_0x4c8b('0x2a')])||(this[_0x4c8b('0x2a')]=_0x5809ca,this['_onAttributesChange'](this['attributes']));}[_0x4c8b('0x1a')](){return{'id':this['id'],'type':this[_0x4c8b('0x5')]?this[_0x4c8b('0x24')]+':'+this['subType']:this['type'],'authorId':this['author']['id'],'createdAt':this['createdAt'],'hasComments':this['hasComments'],'data':this[_0x4c8b('0xd')],'attributes':this[_0x4c8b('0x2a')]};}static[_0x4c8b('0x8')](){return _0x2cba40()[_0x4c8b('0x9')](0x1,0x5);}}_0x2e8f74(o,_0x131e64);