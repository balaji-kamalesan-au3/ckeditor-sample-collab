/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
'use strict';var __importDefault=this&&this['__importDefault']||function(_0xb21d55){return _0xb21d55&&_0xb21d55['__esModule']?_0xb21d55:{'default':_0xb21d55};};Object['defineProperty'](exports,'__esModule',{'value':!0x0});const utils_1=require('ckeditor5/src/utils'),channelmessage_1=__importDefault(require('./../websocketgateway/messages/channelmessage')),messagescompressor_1=__importDefault(require('./../messagescompressor'));class Channel{constructor(_0x45f314,_0x23495e,_0xfb6faa){this['_channelName']=_0x45f314,this['_wsGateway']=_0x23495e,this['_socket']=_0xfb6faa,this['_subscribeToChannel']();}['remove'](){this['_socket']['off'](this['_channelName']);}['getEventName'](_0x3a5011,_0x104130=!0x1){let _0x3a3f76='';return _0x104130&&(_0x3a3f76+='all:'),_0x3a3f76+='event',_0x3a5011&&(_0x3a3f76+=':'+_0x3a5011),_0x3a3f76;}['_subscribeToChannel'](){this['_socket']['on'](this['_channelName'],_0x540fa5=>{const _0x332a49=messagescompressor_1['default']['decode'](_0x540fa5,channelmessage_1['default']);this['fire'](this['getEventName'](_0x332a49['type'],!0x0),_0x332a49['data'],_0x332a49['socketId']),_0x332a49['socketId']!==this['_wsGateway']['socketId']&&this['fire'](this['getEventName'](_0x332a49['type']),_0x332a49['data'],_0x332a49['socketId']);});}}(0x0,utils_1['mix'])(Channel,utils_1['EmitterMixin']),exports['default']=Channel;