/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5682=['every','keys','__className','stringify','shift','_protobufDescriptor','children','bool','parse','buffers','push','attributesJson','repeated','Position','decompress','description','Element','attributes','compress','operationName','attributesBoolean','nodes'];(function(_0x4af1c5,_0x568211){const _0x5e0328=function(_0x341cd5){while(--_0x341cd5){_0x4af1c5['push'](_0x4af1c5['shift']());}};_0x5e0328(++_0x568211);}(_0x5682,0x19f));const _0x5e03=function(_0x4af1c5,_0x568211){_0x4af1c5=_0x4af1c5-0x0;let _0x5e0328=_0x5682[_0x4af1c5];return _0x5e0328;};import _0x4bcaed from'./operationcompressor';import{parsePositionBeforeCompression as _0x6926dc,parsePositionAfterCompression as _0x2f3ee4}from'../utils';export default class s extends _0x4bcaed{static get[_0x5e03('0x12')](){return{'fields':{'position':{'type':_0x5e03('0x10'),'id':0x1},'nodes':{'rule':_0x5e03('0xf'),'type':_0x5e03('0x13'),'id':0x2},'shouldReceiveAttributes':{'type':_0x5e03('0xa'),'id':0x3},'wasUndone':{'type':_0x5e03('0xa'),'id':0x4}}};}[_0x5e03('0x15')](_0x43b45d,_0x2fc805){const _0x62a312=_0x2fc805[_0x5e03('0x7')]();A(_0x62a312[_0x5e03('0x2')]),_0x6926dc(_0x62a312),_0x43b45d[_0x5e03('0xc')][_0x5e03('0xd')](this[_0x5e03('0x8')][_0x5e03('0x15')](_0x62a312)),_0x43b45d['types']['push'](this['id']);}[_0x5e03('0x11')](_0x246803,_0xa8d440){const {types:_0x3f60e6,buffers:_0x865512}=_0xa8d440,_0x1d8e0f=this[_0x5e03('0x8')][_0x5e03('0x11')](_0x865512['shift']());_0x3f60e6['shift'](),_0x1d8e0f['nodes']||(_0x1d8e0f[_0x5e03('0x2')]=[]),E(_0x1d8e0f[_0x5e03('0x2')]),_0x2f3ee4(_0x1d8e0f),_0x1d8e0f[_0x5e03('0x5')]=this[_0x5e03('0x0')],_0x246803[_0x5e03('0xd')](_0x1d8e0f);}}function A(_0x321cb2){for(const _0x385b57 of _0x321cb2){if(_0x385b57[_0x5e03('0x14')]){const _0x33f5c5=_0x385b57[_0x5e03('0x14')];R(_0x33f5c5)?_0x385b57['attributesBoolean']=_0x33f5c5:_0x385b57['attributesJson']=JSON[_0x5e03('0x6')](_0x33f5c5);}_0x385b57[_0x5e03('0x9')]&&A(_0x385b57['children']);}}function E(_0xda8ffe){for(const _0x3eb51e of _0xda8ffe)(_0x3eb51e[_0x5e03('0x1')]||_0x3eb51e[_0x5e03('0xe')])&&(_0x3eb51e['attributesBoolean']?(_0x3eb51e['attributes']=_0x3eb51e[_0x5e03('0x1')],delete _0x3eb51e[_0x5e03('0x1')]):(_0x3eb51e[_0x5e03('0x14')]=JSON[_0x5e03('0xb')](_0x3eb51e[_0x5e03('0xe')]),delete _0x3eb51e[_0x5e03('0xe')])),_0x3eb51e[_0x5e03('0x9')]&&E(_0x3eb51e[_0x5e03('0x9')]);}function R(_0x2a2e46){return Object[_0x5e03('0x4')](_0x2a2e46)[_0x5e03('0x3')](_0x3c5e02=>'boolean'==typeof _0x2a2e46[_0x3c5e02]);}