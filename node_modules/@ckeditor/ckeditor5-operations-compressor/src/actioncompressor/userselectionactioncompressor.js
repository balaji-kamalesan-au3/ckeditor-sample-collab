/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x221c=['oldRange','decompress','user:','stickiness','split','name','_compressSingleOperation','_decompressSingleOperation','push','_getCompressorByName','compress','end','startsWith','newRange','buffers','_context','types','__className','start','shift','MarkerOperation'];(function(_0x5f2801,_0x221c2e){const _0x1cf5a8=function(_0x3e50ae){while(--_0x3e50ae){_0x5f2801['push'](_0x5f2801['shift']());}};_0x1cf5a8(++_0x221c2e);}(_0x221c,0x7c));const _0x1cf5=function(_0x5f2801,_0x221c2e){_0x5f2801=_0x5f2801-0x0;let _0x1cf5a8=_0x221c[_0x5f2801];return _0x1cf5a8;};import _0x310ae0 from'./actioncompressor';import{arePositionsEqual as _0x453f82}from'../utils';import{cloneDeep as _0x87627c}from'lodash-es';export default class M extends _0x310ae0{['compress'](_0x340175,_0xbd2edd){if(!function(_0x37daa8,_0x50b96a){if(!_0x37daa8||!_0x50b96a)return!0x1;if(_0x1cf5('0x1')!=_0x37daa8[_0x1cf5('0x13')]||_0x1cf5('0x1')!=_0x50b96a[_0x1cf5('0x13')])return!0x1;if(_0x37daa8[_0x1cf5('0x7')][_0x1cf5('0xe')](_0x1cf5('0x4'))&&_0x50b96a[_0x1cf5('0x7')][_0x1cf5('0xe')]('user:')&&_0x37daa8[_0x1cf5('0x7')]!=_0x50b96a[_0x1cf5('0x7')])return!0x0;return!0x1;}(_0xbd2edd[0x0],_0xbd2edd[0x1]))return!0x1;const _0x57f7b0=_0xbd2edd[_0x1cf5('0x0')]();return _0x57f7b0[_0x1cf5('0x2')]=null,_0x57f7b0[_0x1cf5('0xf')]&&_0x453f82(_0x57f7b0['newRange'][_0x1cf5('0x14')],_0x57f7b0[_0x1cf5('0xf')][_0x1cf5('0xd')])&&(_0x57f7b0[_0x1cf5('0xf')][_0x1cf5('0xd')]=null),_0xbd2edd[_0x1cf5('0x0')](),_0x340175[_0x1cf5('0x12')][_0x1cf5('0xa')](this['id']),_0x340175[_0x1cf5('0x12')][_0x1cf5('0xa')](0x0),_0x340175[_0x1cf5('0x10')][_0x1cf5('0xa')](this[_0x1cf5('0x8')](_0x57f7b0)),!0x0;}[_0x1cf5('0x3')](_0x592c93,_0x2ddee0){const _0x57211d=this['_decompressSingleOperation'](_0x2ddee0);_0x57211d[_0x1cf5('0xf')]&&!_0x57211d[_0x1cf5('0xf')][_0x1cf5('0xd')]&&(_0x57211d[_0x1cf5('0xf')][_0x1cf5('0xd')]=_0x87627c(_0x57211d['newRange'][_0x1cf5('0x14')]));const _0x2b3146=_0x87627c(_0x57211d);_0x2b3146[_0x1cf5('0xf')]&&(_0x2b3146[_0x1cf5('0xf')]['start'][_0x1cf5('0x5')]='toNone',_0x2b3146['newRange'][_0x1cf5('0xd')]=_0x87627c(_0x2b3146[_0x1cf5('0xf')][_0x1cf5('0x14')])),_0x2b3146[_0x1cf5('0x7')]='user:position:'+_0x2b3146['name'][_0x1cf5('0x6')](':')[0x2],_0x2ddee0[_0x1cf5('0x12')][_0x1cf5('0x0')](),_0x592c93[_0x1cf5('0xa')](_0x57211d),_0x592c93['push'](_0x2b3146);}[_0x1cf5('0x8')](_0x24bc81){const _0x1faf05={'types':[],'buffers':[],'baseVersion':0x0};return this[_0x1cf5('0x11')]['_getCompressorByName'](_0x1cf5('0x1'))[_0x1cf5('0xc')](_0x1faf05,[_0x24bc81]),_0x1faf05['buffers'][0x0];}[_0x1cf5('0x9')](_0x2a07ab){const _0x40eef8=[];return this[_0x1cf5('0x11')][_0x1cf5('0xb')](_0x1cf5('0x1'))[_0x1cf5('0x3')](_0x40eef8,_0x2a07ab),_0x40eef8[0x0];}}